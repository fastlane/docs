<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="fastlane team">
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>Screenshots - fastlane docs</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../../css/theme.css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" integrity="sha384-yaOEEinoAKxVHv1ZCY3vqJeRItlRVwZ9pyTCCJLHlyHNndGZIF+S30C1+8oRQ2sz" crossorigin="anonymous">
  <link href="../../../css/fastlane.css" rel="stylesheet" />
  <link href="../../../css/code.css" rel="stylesheet" />
  <link href="../../../css/breadcrumbs.css" rel="stylesheet" />
  <link href="../../../css/fabric.css" rel="stylesheet" />
  <link href="../../../css/sidenav.css" rel="stylesheet" />

  <link rel="preconnect" href="https://fonts.gstatic.com"> 
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Screenshots";
    var mkdocs_page_input_path = "getting-started/ios/screenshots.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js" integrity="sha384-0H+01+wORQpYAMaLWyObzDlXZaG1Mgzrj0DsIDeQX762Cfo2fPEycKxVmhlDjSV4" crossorigin="anonymous"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> fastlane docs</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
                  <ul class=" root">
                      <li class="toctree-l1">
  <a class="reference internal" href="../../..">Home</a>
                      </li>
                  </ul>
          
                  <p class="caption"><span class="caption-text">Getting Started</span></p>
                  <ul class="current">
                      <li class="toctree-l1 current active current">
  <a class="reference internal current toc-no-link" href="#">iOS</a>
      <ul class="current">
                  <li class="toctree-l2">
  <a class="reference internal" href="../setup/">Setup</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../authentication/">Authentication</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../running-tests/">Running Tests</a>
                  </li>
                  <li class="toctree-l2 current active">
  <a class="reference internal current" href="./">Screenshots</a>
      <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#capture-screenshots-automatically">Capture Screenshots Automatically</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#upload-screenshots-to-the-app-store">Upload Screenshots to the App Store</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#use-in-fastfile">Use in Fastfile</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#put-your-screenshots-into-device-frames">Put Your Screenshots Into Device Frames</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#advanced-snapshot">Advanced snapshot</a>
    </li>
      </ul>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../beta-deployment/">Beta Deployment</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../appstore-deployment/">App Store Deployment</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../fastlane-swift/">Swift</a>
                  </li>
      </ul>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal toc-no-link" href="#">Android</a>
      <ul>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../android/setup/">Setup</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../android/running-tests/">Running Tests</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../android/screenshots/">Screenshots</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../android/beta-deployment/">Beta Deployment</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../android/release-deployment/">Release Deployment</a>
                  </li>
      </ul>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal toc-no-link" href="#">Cross Platform</a>
      <ul>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../cross-platform/react-native/">React Native</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../cross-platform/flutter/">Flutter</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../cross-platform/nativescript/">NativeScript</a>
                  </li>
      </ul>
                      </li>
                  </ul>
          
                  <p class="caption"><span class="caption-text">Actions</span></p>
                  <ul>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../actions/">Available Actions</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../create-action/">Create Your Own Action</a>
                      </li>
                  </ul>
          
          
                  <p class="caption"><span class="caption-text">Apple</span></p>
                  <ul>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../app-store-connect-api/">Using App Store Connect API</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../uploading-app-privacy-details/">Uploading App Privacy Details</a>
                      </li>
                  </ul>
          
                  <p class="caption"><span class="caption-text">FAQs</span></p>
                  <ul>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../faqs/">FAQs</a>
                      </li>
                  </ul>
          
                  <p class="caption"><span class="caption-text">Codesigning</span></p>
                  <ul>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../codesigning/getting-started/">Getting Started</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../codesigning/xcode-project/">Xcode Project</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../codesigning/troubleshooting/">Troubleshooting</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../codesigning/common-issues/">Common Issues</a>
                      </li>
                  </ul>
          
                  <p class="caption"><span class="caption-text">Plugins</span></p>
                  <ul>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../plugins/available-plugins/">Available Plugins</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../plugins/using-plugins/">Use Plugins</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../plugins/create-plugin/">Create Your Own Plugin</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../plugins/plugins-troubleshooting/">Plugins Troubleshooting</a>
                      </li>
                  </ul>
          
                  <p class="caption"><span class="caption-text">Best Practices</span></p>
                  <ul>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../best-practices/xcodebuild-formatters/">Xcodebuild Formatters</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../best-practices/source-control/">Source Control</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../best-practices/continuous-integration/">Continuous Integration</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal toc-no-link" href="#">CI Integrations</a>
      <ul>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/appcircle/">Appcircle</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/azure-devops/">Azure DevOps</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/bamboo/">Bamboo</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/bitrise/">Bitrise</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/circle-ci/">CircleCI</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/codemagic/">Codemagic</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/github/">GitHub Actions</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/gitlab/">GitLab CI</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/jenkins/">Jenkins</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/semaphore/">Semaphore</a>
                  </li>
                  <li class="toctree-l2">
  <a class="reference internal" href="../../../best-practices/continuous-integration/travis/">Travis</a>
                  </li>
      </ul>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../best-practices/keys/">Keys</a>
                      </li>
                  </ul>
          
                  <p class="caption"><span class="caption-text">Advanced</span></p>
                  <ul>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../advanced/fastlane/">fastlane</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../advanced/Fastfile/">Fastfile</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../advanced/Appfile/">Appfile</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../advanced/lanes/">Lanes</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../advanced/actions/">Actions</a>
                      </li>
                      <li class="toctree-l1 current">
  <a class="reference internal" href="../../../advanced/other/">Other</a>
                      </li>
                  </ul>
          
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">fastlane docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>iOS &raquo;</li>
        
      
        
          <li>Getting Started &raquo;</li>
        
      
    
    <li>Screenshots</li>

    
      <li class="wy-breadcrumbs-aside">

        

        

        <a href="https://github.com/fastlane/docs/edit/master/docs/getting-started/ios/screenshots.md" 
            class="icon icon-github"
        > Edit on GitHub</a>
      </li>
    

    <li class="wy-breadcrumbs-aside wy-breadcrumbs-aside-search">
      <input type="text" name="q" placeholder="Search docs" />
    </li>
  </ul>
  
  <hr/>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<!-- at the end of the BODY -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
    apiKey: 'c651753b86f5f8a00f8f2e9e9ca95865',
    indexName: 'fastlane',
    inputSelector: 'body > div.wy-grid-for-nav > section > div > div > div:nth-child(1) > ul > li.wy-breadcrumbs-aside > input[type="text"]',
    debug: false
});
</script>
          <div role="main">
            <div class="section">
              
                <style type="text/css">
  .fastlane-setup {
    border-left: .4rem solid #00b0ff;
    border-bottom: .1rem solid rgba(0,176,255,.1);
    background-color: rgba(0,176,255,.1);
    padding: 15px;
    margin-bottom: 20px;
    font-weight: 200;
  }
  .fastlane-setup-wrapper {
    background-color: rgba(0,176,255,.05);
  }
  .fastlane-setup-wrapper[open] {
    padding-bottom: 1px;
  }
  .fastlane-setup-header {
    font-size: 20px;
    font-weight: 500;
  }
  .fastlane-setup-more-details {
    font-size: 18px;
    font-weight: 350;
  }
</style>

<details class="fastlane-setup-wrapper">
  <summary class="fastlane-setup">New to fastlane? Click here to open the installation & setup instructions first</summary>


<p class="fastlane-setup-header">1) Install the latest Xcode command line tools</p>


<pre><code class="language-no-highlight">xcode-select --install
</code></pre>


<p class="fastlane-setup-header">2) Install <i>fastlane</i></p>


<pre><code class="language-sh"># Using RubyGems
sudo gem install fastlane -NV

# Alternatively using Homebrew
brew install fastlane
</code></pre>


<p class="fastlane-setup-header">3) Navigate to your project and run</p>


<pre><code class="language-no-highlight">fastlane init
</code></pre>


<p class="fastlane-setup-more-details"><a href="/getting-started/ios/setup/">More Details</a></p>

</details>

<h1 id="fastlane-screenshots-for-ios-and-tvos"><em>fastlane</em> screenshots for iOS and tvOS</h1>
<p>Your App Store screenshots are probably the most important thing when it comes to convincing potential users to download or purchase your app. Unfortunately, many apps don't do screenshots well. This is often because taking screenshots of your app and then preparing them for display is time consuming, and it's hard to get everything right and consistent! For example:</p>
<ul>
<li>Are the screenshots in the App Store inconsistent with your latest app design?</li>
<li>Is your app localized into many languages that require different screenshots for each?</li>
<li>Have you made sure that no loading indicators are showing?</li>
<li>Is the same content displayed for each of your size variations?</li>
</ul>
<p><em>fastlane</em> tools can automate this process making it fast, and consistent while giving you beautiful results!</p>
<h3 id="alternatives">Alternatives</h3>
<p>For the full story about the many ways that developers can capture and beautify screenshots check out <a href="https://krausefx.com/blog/creating-perfect-app-store-screenshots-of-your-ios-app">this article</a>.</p>
<h4 id="manually-capturing-screenshots">Manually Capturing Screenshots</h4>
<p>Manually taking screenshots takes too much time, which also decreases the quality of the screenshots. Since it is not automated, the screenshots will show slightly different content on the various devices and languages. Many companies choose to create screenshots in one language and use them for all languages. While this might seem okay to us developers, there are many potential users out there that cannot read the text on your app screenshots if they are not localised. Have you ever looked at a screenshot with content in a language you don't know? It won't convince you to download the app.</p>
<p>However, the biggest disadvantage of this method is what happens when you need to repeat the process. If you notice a spelling mistake in the screenshots, if you release an update with a new design, or if you just want to show more up to date content, you'll have to create new screenshots for all languages and devices... manually.</p>
<p>The positive side of this approach is that your screenshots will all be crisp and correctly sized, with readable text.</p>
<h4 id="scaled-screenshots-via-app-store-connect">Scaled Screenshots via App Store Connect</h4>
<p>App Store Connect allows you to use one set of screenshots per device type, which will then be scaled to the appropriate size when viewed in the App Store on a user's device.</p>
<p>While this is convenient, this approach has the same problems as the device frame approach: The screenshots don't actually show how the app looks on the user's device. It's a valid way to start though, since you can gradually overwrite screenshots for specific languages and devices.</p>
<h2 id="capture-screenshots-automatically">Capture Screenshots Automatically</h2>
<p><em>snapshot</em> works with <em>fastlane</em> to automate the process of capturing screenshots of your app. It allows you to:</p>
<ul>
<li>Capture hundreds of screenshots in multiple languages on all simulators</li>
<li>Take screenshots in multiple device simulators concurrently to cut down execution time</li>
<li>Do something else while the computer takes the screenshots for you</li>
<li>Configure it once, and store the configuration so anyone on the team can run it</li>
<li>Generate a beautiful web page showing all screenshots on all devices. This is perfect to send to Q&amp;A, marketing, or translators for verification</li>
<li>Avoid having loading indicators in your App Store screenshots by intelligently waiting for network requests to be finished</li>
<li>Get a summary of how your app looks like across all supported devices and languages</li>
</ul>
<p>After <em>snapshot</em> successfully captures all the screenshots, it will show you a beautiful HTML page to summarize all the screens that were captured:</p>
<p><a href="/img/getting-started/ios/htmlPagePreviewFade.jpg">
  <img src="/img/getting-started/ios/htmlPagePreviewFade.jpg" alt="HTML summary page" width="500" />
</a></p>
<h3 id="getting-started-using-ui-tests">Getting Started Using UI Tests</h3>
<p><em>snapshot</em> uses the capabilities of Apple's UI Tests to drive interactions with your app. To get familiar with writing UI Tests, check out the following introductions:</p>
<ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2015-406/">WWDC 2015 Introduction to UI Tests</a></li>
<li><a href="http://www.mokacoding.com/blog/xcode-7-ui-testing/">A first look into UI Tests</a></li>
<li><a href="http://masilotti.com/ui-testing-xcode-7/">UI Testing in Xcode 7</a></li>
<li><a href="https://github.com/ConfusedVorlon/HSTestingBackchannel">HSTestingBackchannel : ‘Cheat’ by communicating directly with your app</a></li>
<li><a href="https://tisunov.github.io/2015/11/06/automating-app-store-screenshots-generation-with-fastlane-snapshot-and-sketch.html">Automating App Store screenshots using fastlane snapshot and frameit</a></li>
</ul>
<p>To jump-start your UI tests, you can use the UI Test recorder, which you can start by clicking the red record button on the bottom of the window. By interacting with your app through the simulator while using it, Xcode will generate UI Test code for you. To learn more, check out this <a href="https://krausefx.com/blog/run-xcode-7-ui-tests-from-the-command-line">this blog post</a>!</p>
<h3 id="setting-up-snapshot">Setting Up <em>snapshot</em></h3>
<ol>
<li>Create a new UI Test target in your Xcode project (See the top part of <a href="https://krausefx.com/blog/run-xcode-7-ui-tests-from-the-command-line">this article</a>)</li>
<li>Run <code>fastlane snapshot init</code> in your project folder</li>
<li>Add the <code>./SnapshotHelper.swift</code> file to your UI Test target (You can move the file anywhere you want)</li>
<li>Add a new Xcode scheme for the newly created UI Test target</li>
<li>Edit the scheme</li>
<li>In the list on the left click "Build", and enable the checkbox under the "Run" column for your target.</li>
<li>Enable the <code>Shared</code> box of the newly created scheme</li>
<li>(Objective C only) Add the bridging header to your test class.<ul>
<li><code>#import "MYUITests-Swift.h"</code></li>
<li>The bridging header is named after your test target with -Swift.h appended.</li>
</ul>
</li>
<li>In your UI Test class, click the <code>Record</code> button on the bottom left and record your interaction</li>
<li>To take a screenshot, call the following between interactions<ul>
<li>Swift: <code>snapshot("01LoginScreen")</code></li>
<li>Objective C: <code>[Snapshot snapshot:@"01LoginScreen" timeWaitingForIdle:10];</code></li>
</ul>
</li>
<li>Add the following code to your <code>setUp()</code> method:</li>
</ol>
<p><strong>Swift:</strong></p>
<pre><code class="language-swift">let app = XCUIApplication()
setupSnapshot(app)
app.launch()
</code></pre>
<p><strong>Objective C:</strong></p>
<pre><code class="language-objective-c">XCUIApplication *app = [[XCUIApplication alloc] init];
[Snapshot setupSnapshot:app waitForAnimations:NO];
[app launch];
</code></pre>
<p><span>12.</span> In the terminal run <code>fastlane snapshot</code>.<br />
WARNING: Running the test in Xcode does not create the snapshots and will not generate the correct results - although no tests will fail.  The command line program creates the necessary subdirectories, renames the files as appropriate, and generates the overview html page.</p>
<p>The setup process will also generate a <code>Snapfile</code>, looking similar to</p>
<pre><code class="language-ruby"># A list of devices you want to take the screenshots from
# devices([
#  &quot;iPad (7th generation)&quot;,
#  &quot;iPad Air (3rd generation)&quot;,
#  &quot;iPad Pro (11-inch)&quot;,
#  &quot;iPad Pro (12.9-inch) (3rd generation)&quot;,
#  &quot;iPad Pro (9.7-inch)&quot;,
#  &quot;iPhone 11&quot;,
#  &quot;iPhone 11 Pro&quot;,
#  &quot;iPhone 11 Pro Max&quot;,
#  &quot;iPhone 8&quot;,
#  &quot;iPhone 8 Plus&quot;
# ])

languages([
  &quot;en-US&quot;,
  &quot;de-DE&quot;
])

# The name of the scheme which contains the UI Tests
# scheme &quot;SchemeName&quot;

# Where should the resulting screenshots be stored?
# output_directory &quot;./screenshots&quot;

# clear_previous_screenshots true # remove the '#' to clear all previously generated screenshots before creating new ones

# Choose which project/workspace to use
# project &quot;./Project.xcodeproj&quot;
# workspace &quot;./Project.xcworkspace&quot;

# For more information about all available options run
# fastlane action snapshot
</code></pre>
<p>You can adapt this file to fit your project. Every time you run <code>fastlane snapshot</code> the file will be loaded automatically.</p>
<p>For a list of all available parameters that can be used in the <code>Snapfile</code> run <code>fastlane action snapshot</code>.</p>
<p>If you have <em>fastlane</em> installed, it's easy to give <em>snapshot</em> a try. First clone the <em>fastlane</em> repo, head over to the <em>snapshot</em> example project, and then run <code>fastlane snapshot</code></p>
<pre><code class="language-no-highlight">git clone https://github.com/fastlane/fastlane  # Clone the fastlane repo
cd fastlane/snapshot/example                    # Navigate to the example project
fastlane snapshot                               # Generate screenshots for the sample app
</code></pre>
<p><img alt="/img/getting-started/ios/snapshot.gif" src="/img/getting-started/ios/snapshot.gif" /></p>
<h2 id="upload-screenshots-to-the-app-store">Upload Screenshots to the App Store</h2>
<p>After generating your screenshots using <code>fastlane snapshot</code>, you usually want to upload them to App Store Connect.</p>
<p>If you followed the setup guide, you already ran <code>fastlane init</code> before, so you should have your existing screenshots and metadata inside the <code>fastlane/screenshots</code> and <code>fastlane/metadata</code> directory. Running <code>fastlane snapshot</code> will store the screenshots in the <code>fastlane/screenshots</code> directory by default.</p>
<p>To upload the screenshots stored in <code>fastlane/screenshots</code>, just run</p>
<pre><code class="language-no-highlight">fastlane deliver
</code></pre>
<p>This will also show you a metadata summary, before actually uploading the screenshots, as this will overwrite the metadata and screenshots you already have on App Store Connect.</p>
<h2 id="use-in-fastfile">Use in Fastfile</h2>
<p>To put all of this together so that anyone on your team could trigger generating and uploading new screenshots, you can define a <em>fastlane</em> lane called <code>screenshots</code>. It would be responsible for:</p>
<ol>
<li>Running your app through <em>snapshot</em> to automatically capture your screenshots</li>
<li>Having <em>deliver</em> send your final screenshots to App Store Connect for use in the App Store</li>
</ol>
<p>Add the following code to your <code>fastlane/Fastfile</code>:</p>
<pre><code class="language-ruby">lane :screenshots do
  capture_screenshots
  upload_to_app_store
end
</code></pre>
<p>To get a list of all available options for each of the steps, run</p>
<pre><code class="language-no-highlight">fastlane action capture_screenshots
fastlane action upload_to_app_store
</code></pre>
<h2 id="put-your-screenshots-into-device-frames">Put Your Screenshots Into Device Frames</h2>
<p><em>frameit</em> helps you beautify your screenshots with device frames and text by running one simple command. It provides support for:</p>
<ul>
<li>Multiple device types</li>
<li>Portrait and landscape orientations</li>
<li>Black and silver devices</li>
<li>Setting a background color and decorating the image with text</li>
</ul>
<p><a href="/img/getting-started/ios/frameit-results.png">
  <img src="/img/getting-started/ios/frameit-results.png" alt="frameit results" width="800" />
</a></p>
<h3 id="usage">Usage</h3>
<p>To automatically add device frames around all screenshots in the current directory and its subdirectories, just run:</p>
<pre><code class="language-no-highlight">fastlane frameit
</code></pre>
<p>This will only add a device frame around the screenshots, not the background and title. Those images can be used for your website, email newsletter and similar.</p>
<p>If you want to implement the custom titles and background, you'll have to setup a <code>Framefile.json</code>, more information can be found <a href="https://docs.fastlane.tools/actions/frameit/#titles-and-background-optional">here</a>.</p>
<p>If you want to upload the screenshots to the App Store, you <strong>have</strong> to provide a <code>Framefile.json</code>, with titles and background, otherwise the resolution of the framed screenshots doesn't match the requirements of App Store Connect.</p>
<h3 id="dependencies">Dependencies</h3>
<details>
<summary>Installing ImageMagick</summary>
<p>To perform image manipulation, <em>frameit</em> depends on a tool called <code>imagemagick</code>. The easiest way to install it is through <a href="http://brew.sh/">homebrew</a>:</p>
<pre><code class="language-no-highlight">brew install libpng jpeg imagemagick
</code></pre>
</details>
<details>
<summary>Troubleshooting ImageMagick</summary>
<p>If you have installed <em>imagemagick</em> but are seeing error messages like:</p>
<pre><code class="language-no-highlight">mogrify: no decode delegate for this image format `PNG'
</code></pre>
<p>You may need to reinstall and build from source. Run:</p>
<pre><code class="language-no-highlight">brew uninstall imagemagick; brew install libpng jpeg; brew install imagemagick --build-from-source
</code></pre>
</details>
<details>
<summary>Setting Up Device Frames</summary>
<p>To download the latest device frames, you can run</p>
<pre><code class="language-no-highlight">fastlane frameit setup
</code></pre>
<p>This usually happens automatically when you use <em>frameit</em> for the first time on a new machine</p>
</details>
<p>To add the framing to your deployment process, use the following code in your <code>Fastfile</code>:</p>
<pre><code class="language-ruby">lane :screenshots do
  capture_screenshots
  frame_screenshots(white: true)
  upload_to_app_store
end
</code></pre>
<p>To get a list of all available options for <em>frame_screenshots</em> (which calls into <em>frameit</em>)</p>
<pre><code class="language-no-highlight">fastlane action frame_screenshots
</code></pre>
<h2 id="advanced-snapshot">Advanced <em>snapshot</em></h2>
<details>
<summary>Sample uses</summary>
<pre><code class="language-ruby">lane :screenshots do
  capture_screenshots
end
</code></pre>
<p>Your screenshots will be stored in the <code>./screenshots/</code> folder by default (or <code>./fastlane/screenshots</code> if you're using <a href="https://fastlane.tools"><em>fastlane</em></a>)</p>
<p>If any error occurs while running the snapshot script on a device, that device will not have any screenshots, and <em>snapshot</em> will continue with the next device or language. To stop the flow after the first error, run</p>
<pre><code class="language-ruby">capture_screenshots(stop_after_first_error: true)
</code></pre>
<p>Also by default, <em>snapshot</em> will open the HTML after all is done. This can be skipped with the following command</p>
<pre><code class="language-ruby">capture_screenshots(skip_open_summary: true)
</code></pre>
<p>There are a lot of options available that define how to build your app, for example</p>
<pre><code class="language-ruby">capture_screenshots(scheme: &quot;UITests&quot;, configuration: &quot;Release&quot;, sdk: &quot;iphonesimulator&quot;)
</code></pre>
<p>Reinstall the app before running <em>snapshot</em></p>
<pre><code class="language-ruby">capture_screenshots(reinstall_app: true, app_identifier: &quot;tools.fastlane.app&quot;)
</code></pre>
<p>By default <em>snapshot</em> automatically retries running UI Tests if they fail. This is due to randomly failing UI Tests (e.g. <a href="https://github.com/fastlane/snapshot/issues/372">#372</a>). You can adapt this number using</p>
<pre><code class="language-ruby">capture_screenshots(number_of_retries: 3)
</code></pre>
<p>Add photos and/or videos to the simulator before running <em>snapshot</em></p>
<pre><code class="language-ruby">capture_screenshots(add_photos: &quot;MyTestApp/demo.jpg&quot;, add_videos: &quot;MyTestApp/demo.mp4&quot;)
</code></pre>
<p>For a list for all available options run</p>
<pre><code class="language-no-highlight">fastlane action capture_screenshots
</code></pre>
</details>
<details>
<summary>Reset Xcode simulators</summary>
<p>You can run this command in the terminal to delete and re-create all iOS simulators. This is useful when Xcode duplicated your local simulators.</p>
<pre><code class="language-no-highlight">fastlane snapshot reset_simulators
</code></pre>
</details>
<details>
<summary>Launch Arguments</summary>
<p>You can provide additional arguments to your app on launch. These strings will be available in your app (eg. not in the testing target) through <code>ProcessInfo.processInfo.arguments</code>. Alternatively, use user-default syntax (<code>-key value</code>) and they will be available as key-value pairs in <code>UserDefaults.standard</code>.</p>
<pre><code class="language-ruby">launch_arguments([
  &quot;-firstName Felix -lastName Krause&quot;
])
</code></pre>
<pre><code class="language-swift">name.text = UserDefaults.standard.string(forKey: &quot;firstName&quot;)
// name.text = &quot;Felix&quot;
</code></pre>
<p><em>snapshot</em> includes <code>-FASTLANE_SNAPSHOT YES</code>, which will set a temporary user default for the key <code>FASTLANE_SNAPSHOT</code>, you may use this to detect when the app is run by <em>snapshot</em>.</p>
<pre><code class="language-swift">if UserDefaults.standard.bool(forKey: &quot;FASTLANE_SNAPSHOT&quot;) {
    // runtime check that we are in snapshot mode
}
</code></pre>
<p>Specify multiple argument strings and <em>snapshot</em> will generate screenshots for each combination of arguments, devices, and languages. This is useful for comparing the same screenshots with different feature flags, dynamic text sizes, and different data sets.</p>
<pre><code class="language-ruby"># Snapfile for A/B Test Comparison
launch_arguments([
  &quot;-secretFeatureEnabled YES&quot;,
  &quot;-secretFeatureEnabled NO&quot;
])
</code></pre>
</details>
<details>
<summary>Update snapshot helpers</summary>
<p>Some updates require the helper files to be updated. <em>snapshot</em> will automatically warn you and tell you how to update.</p>
<p>Basically you can run</p>
<pre><code class="language-no-highlight">fastlane snapshot update
</code></pre>
<p>to update your <code>SnapshotHelper.swift</code> files. In case you modified your <code>SnapshotHelper.swift</code> and want to manually update the file, check out <a href="https://github.com/fastlane/fastlane/blob/master/snapshot/lib/assets/SnapshotHelper.swift">SnapshotHelper.swift</a>.</p>
</details>
<details>
<summary>Clean status bar</summary>
<p>To clean the status bar (9:41, full battery and full signal), use <a href="https://docs.fastlane.tools/actions/capture_ios_screenshots/#use-a-clean-status-bar">the <code>override_status_bar</code> parameter</a>.</p>
</details>
<details>
<summary>How does _snapshot_ work?</summary>
<p>The easiest solution would be to just render the UIWindow into a file. That's not possible because UI Tests don't run on a main thread. So <em>snapshot</em> uses a different approach:</p>
<p>When you run unit tests in Xcode, the reporter generates a plist file, documenting all events that occurred during the tests (<a href="http://michele.io/test-logs-in-xcode">More Information</a>). Additionally, Xcode generates screenshots before, during and after each of these events. There is no way to manually trigger a screenshot event. The screenshots and the plist files are stored in the DerivedData directory, which <em>snapshot</em> stores in a temporary folder.</p>
<p>When the user calls <code>snapshot(...)</code> in the UI Tests (Swift or Objective C) the script actually does a rotation to <code>.Unknown</code> which doesn't have any effect on the actual app, but is enough to trigger a screenshot. It has no effect to the application and is not something you would do in your tests. The goal was to find <em>some</em> event that a user would never trigger, so that we know it's from <em>snapshot</em>. On tvOS, there is no orientation so we ask for a count of app views with type "Browser" (which should never exist on tvOS).</p>
<p><em>snapshot</em> then iterates through all test events and check where we either did this weird rotation (on iOS) or searched for browsers (on tvOS). Once <em>snapshot</em> has all events triggered by <em>snapshot</em> it collects a ordered list of all the file names of the actual screenshots of the application.</p>
<p>In the test output, the Swift <em>snapshot</em> function will print out something like this</p>
<blockquote>
<p>snapshot: [some random text here]</p>
</blockquote>
<p><em>snapshot</em> finds all these entries using a regex. The number of <em>snapshot</em> outputs in the terminal and the number of <em>snapshot</em> events in the plist file should be the same. Knowing that, <em>snapshot</em> automatically matches these 2 lists to identify the name of each of these screenshots. They are then copied over to the output directory and separated by language and device.</p>
<p>Two things have to be passed on from <em>snapshot</em> to the <code>xcodebuild</code> command line tool:</p>
<ul>
<li>The device type is passed via the <code>destination</code> parameter of the <code>xcodebuild</code> parameter</li>
<li>The language is passed via a temporary file which is written by <em>snapshot</em> before running the tests and read by the UI Tests when launching the application</li>
</ul>
<p>If you find a better way to do any of this, please submit an issue on GitHub or even a pull request :+1:</p>
<p>Also, feel free to duplicate radar <a href="https://openradar.appspot.com/radar?id=5056366381105152">23062925</a>.</p>
</details>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div class="fastlane" role="contentinfo">
    <p>
      <a href="https://github.com/fastlane/fastlane" target="_blank">
        <img src="/img/fastlane_text.png" width="200" />
      </a>
      <iframe src="https://ghbtns.com/github-btn.html?user=fastlane&repo=fastlane&type=watch&count=true"
        allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20" class="githubButton"></iframe>
    </p>
  </div>

  Documentation built 2024-07-12 with <a href="http://www.mkdocs.org">MkDocs</a> <!-- using <a href="https://www.mkdocs.org/user-guide/choosing-your-theme/#readthedocs">readthedocs theme</a> --> — Copyright &copy; 2024 <a href="https://fastlane.tools">fastlane</a>
</footer>

<script type="text/javascript">
  function ensureExternalLinksOpenInNewTab() {
    const links = document.links;
    for (let i = 0, linksLength = links.length; i < linksLength; i++) {
      if (links[i].hostname != window.location.hostname) {
        links[i].target = '_blank';
      }
    }
  }

  function scrollToAnchorNestedInDetailsIfNeeded() {
    function scrollToElement() {
      const id = window.location.hash.substr(1);
      if (id === '') {
        return;
      }

      const element = document.getElementById(id);
      if (!element) {
        return;
      }

      const details = document.getElementsByTagName('details');
      for (const element of details) {
        element.open = false;
      }

      let temp = element;
      while (temp && temp.tagName) {
        if (temp.tagName.toLowerCase() === 'details') {
          temp.open = true;
        }

        temp = temp.parentNode;
      }

      element.scrollIntoView();
    }

    function onReady(callback) {
      if (document.readyState !== 'loading') {
        callback();
      } else if (document.addEventListener) {
        document.addEventListener('DOMContentLoaded', callback);
      } else {
        document.attachEvent('onreadystatechange', function() {
          if (document.readyState === 'complete') {
            callback();
          }
        });
      }
    }

    onReady(function () {
      scrollToElement();
      window.addEventListener('hashchange', scrollToElement);
    });
  }

  ensureExternalLinksOpenInNewTab();
  scrollToAnchorNestedInDetailsIfNeeded();
</script>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/fastlane/docs" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../running-tests/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../beta-deployment/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <!-- <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script> -->
      <script src="../../../search/main.js" defer></script>
    <script>
        window.onload = function () {
            $(document).on("click","[data-toggle='wy-nav-top']",function(){$("[data-toggle='wy-nav-shift']").toggleClass("shift")})
            $("div[role=main] table").toggleClass("docutils");
            //SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
